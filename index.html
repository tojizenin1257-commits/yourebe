<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOUREBE - YOUTURE | Plateforme Vidéo Française Gratuite</title>
    <meta name="keywords" content="youture, yourebe, plateforme vidéo, vidéo française, streaming gratuit, regarder vidéos, télécharger vidéos, youtube alternative">
    <meta name="description" content="YOUTURE (YOUREBE) - La plateforme vidéo française gratuite pour regarder, partager et télécharger des vidéos. Alternative à YouTube, streaming gratuit, sans publicité intrusive.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', Arial, sans-serif;
        }

        body {
            background-color: #0f0f0f;
            color: #f1f1f1;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background-color: #0f0f0f;
            padding: 12px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid #3f3f3f;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            padding: 0 12px;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #ff0000;
            cursor: pointer;
        }

        .logo i {
            margin-right: 8px;
            font-size: 24px;
        }

        .sidebar-section {
            padding: 8px 0;
            border-bottom: 1px solid #3f3f3f;
            margin-bottom: 12px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 4px;
            transition: background-color 0.2s;
        }

        .sidebar-item:hover, .sidebar-item.active {
            background-color: #272727;
        }

        .sidebar-item i {
            margin-right: 24px;
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        .sidebar-title {
            padding: 8px 12px;
            font-size: 16px;
            font-weight: bold;
            color: #aaa;
            margin-top: 12px;
        }

        .sidebar-footer {
            padding: 16px 12px;
            font-size: 13px;
            color: #717171;
            line-height: 1.5;
        }

        /* Main content */
        .main-content {
            flex: 1;
            margin-left: 240px;
            min-height: 100vh;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
            height: 56px;
            background-color: #0f0f0f;
            position: sticky;
            top: 0;
            z-index: 90;
            border-bottom: 1px solid #3f3f3f;
        }

        .search-container {
            display: flex;
            flex: 0 1 640px;
        }

        .search-input {
            flex: 1;
            padding: 10px 16px;
            background-color: #121212;
            border: 1px solid #303030;
            border-right: none;
            border-radius: 40px 0 0 40px;
            color: white;
            font-size: 16px;
        }

        .search-button {
            background-color: #222222;
            border: 1px solid #303030;
            border-left: none;
            border-radius: 0 40px 40px 0;
            padding: 8px 20px;
            cursor: pointer;
            color: #f1f1f1;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-btn {
            background: none;
            border: none;
            color: #f1f1f1;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .header-btn:hover {
            background-color: #272727;
        }

        .upload-btn {
            background-color: #ff0000;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-badge {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #ff0000;
            color: white;
            font-size: 10px;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #3ea6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            position: relative;
        }

        .user-avatar-img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        /* Content sections */
        .content-section {
            padding: 24px;
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Home page */
        .home-container {
            padding: 24px;
        }

        .category-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .category-filter {
            background-color: #272727;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            white-space: nowrap;
            font-size: 14px;
        }

        .category-filter.active {
            background-color: white;
            color: black;
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .video-card {
            cursor: pointer;
            transition: transform 0.2s;
        }

        .video-card:hover {
            transform: scale(1.02);
        }

        .video-thumbnail-container {
            position: relative;
            width: 100%;
            height: 180px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .video-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-duration {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
        }

        .video-info {
            display: flex;
            gap: 12px;
        }

        .channel-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #3ea6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            overflow: hidden;
        }

        .channel-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-details h3 {
            font-size: 16px;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-details p {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 4px;
        }

        /* Video player page */
        .player-container {
            display: flex;
            gap: 24px;
            padding: 24px;
        }

        .player-section {
            flex: 7;
        }

        .recommended-section {
            flex: 3;
        }

        .video-container {
            background-color: #000;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 16px;
            position: relative;
        }

        #main-video {
            width: 100%;
            height: 500px;
            display: block;
        }

        .video-info-container {
            padding: 16px 0;
            border-bottom: 1px solid #3f3f3f;
        }

        .video-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .video-stats {
            display: flex;
            justify-content: space-between;
            color: #aaa;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .video-actions {
            display: flex;
            gap: 16px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: #f1f1f1;
            cursor: pointer;
            padding: 8px;
            border-radius: 20px;
        }

        .action-btn:hover {
            background-color: #272727;
        }

        .channel-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #3f3f3f;
        }

        .channel-details {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .subscribe-btn {
            background-color: #f1f1f1;
            color: #0f0f0f;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .subscribe-btn.subscribed {
            background-color: #272727;
            color: #f1f1f1;
        }

        /* Comments section */
        .comments-section {
            padding: 16px 0;
        }

        .comments-title {
            font-size: 18px;
            margin-bottom: 16px;
        }

        .comment-form {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .user-comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #3ea6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            overflow: hidden;
        }

        .user-comment-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .comment-input-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .comment-input {
            background: none;
            border: none;
            border-bottom: 1px solid #3f3f3f;
            color: white;
            font-size: 14px;
            padding: 8px 0;
            margin-bottom: 8px;
        }

        .comment-input:focus {
            outline: none;
            border-bottom: 1px solid #3ea6ff;
        }

        .comment-submit-btn {
            align-self: flex-end;
            background-color: #3ea6ff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .comment-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .comment-item {
            display: flex;
            gap: 16px;
        }

        .comment-text {
            background-color: #272727;
            padding: 12px;
            border-radius: 8px;
            flex: 1;
            position: relative;
        }

        .comment-author {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .comment-content {
            font-size: 14px;
            line-height: 1.4;
        }

        /* Recommended videos */
        .recommended-title {
            font-size: 18px;
            margin-bottom: 16px;
        }

        .recommended-videos {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .recommended-video {
            display: flex;
            gap: 8px;
            cursor: pointer;
        }

        .recommended-thumbnail {
            width: 168px;
            height: 94px;
            background-color: #272727;
            border-radius: 8px;
            flex-shrink: 0;
            overflow: hidden;
        }

        .recommended-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .recommended-info {
            flex: 1;
        }

        .recommended-video-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .recommended-channel, .recommended-stats {
            font-size: 12px;
            color: #aaa;
        }

        /* Shorts section */
        .shorts-container {
            padding: 24px;
        }

        .shorts-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 20px;
            margin-bottom: 24px;
        }

        .shorts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
        }

        .short-card {
            cursor: pointer;
        }

        .short-thumbnail {
            width: 100%;
            height: 320px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 8px;
            position: relative;
        }

        .short-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .short-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .short-views {
            font-size: 14px;
            color: #aaa;
        }

        /* Profile section */
        .profile-container {
            padding: 24px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #3f3f3f;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #3ea6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: bold;
            overflow: hidden;
        }

        .profile-avatar-large-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .profile-stats {
            display: flex;
            gap: 24px;
            margin-top: 16px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 14px;
            color: #aaa;
        }

        .profile-edit-btn {
            background-color: #272727;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .profile-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 1px solid #3f3f3f;
            padding-bottom: 8px;
        }

        .profile-tab {
            background: none;
            border: none;
            color: #aaa;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 3px solid transparent;
        }

        .profile-tab.active {
            color: white;
            border-bottom-color: #ff0000;
        }

        .profile-videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        /* Library section */
        .library-container {
            padding: 24px;
        }

        .library-title {
            font-size: 20px;
            margin-bottom: 24px;
        }

        .library-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .library-action-btn {
            background-color: #272727;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .library-action-btn.active {
            background-color: #3ea6ff;
        }

        .library-content {
            min-height: 300px;
        }

        .empty-library {
            text-align: center;
            padding: 60px 20px;
            color: #aaa;
        }

        .empty-library i {
            font-size: 64px;
            margin-bottom: 16px;
            color: #3f3f3f;
        }

        /* History section */
        .history-container {
            padding: 24px;
        }

        .history-title {
            font-size: 20px;
            margin-bottom: 24px;
        }

        .history-actions {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .history-clear-btn {
            background-color: #272727;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Upload modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: #212121;
            border-radius: 12px;
            padding: 24px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            color: #f1f1f1;
            font-size: 24px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            background-color: #121212;
            border: 1px solid #3f3f3f;
            border-radius: 8px;
            color: white;
            font-size: 16px;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .file-upload {
            border: 2px dashed #3f3f3f;
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .file-upload:hover {
            border-color: #3ea6ff;
        }

        .upload-icon {
            font-size: 48px;
            color: #3ea6ff;
            margin-bottom: 16px;
        }

        .file-input {
            display: none;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 24px;
        }

        .btn-secondary {
            background-color: #3f3f3f;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #ff0000;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Video management */
        .video-actions-menu {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .video-card:hover .video-actions-menu {
            opacity: 1;
        }

        .video-actions-dropdown {
            position: absolute;
            top: 40px;
            right: 0;
            background-color: #272727;
            border-radius: 8px;
            min-width: 180px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 10;
        }

        .video-actions-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dropdown-item:hover {
            background-color: #3f3f3f;
        }

        /* Profile dropdown */
        .profile-dropdown {
            position: absolute;
            top: 56px;
            right: 24px;
            background-color: #272727;
            border-radius: 8px;
            width: 280px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }

        .profile-dropdown.show {
            display: block;
        }

        .profile-dropdown-header {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #3f3f3f;
        }

        .profile-dropdown-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #3ea6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
        }

        .profile-dropdown-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-dropdown-name {
            font-weight: bold;
            font-size: 16px;
        }

        .profile-dropdown-stats {
            padding: 16px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            border-bottom: 1px solid #3f3f3f;
        }

        .dropdown-stat {
            text-align: center;
        }

        .dropdown-stat-value {
            font-size: 18px;
            font-weight: bold;
            display: block;
        }

        .dropdown-stat-label {
            font-size: 12px;
            color: #aaa;
            display: block;
        }

        .profile-dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .profile-dropdown-item:hover {
            background-color: #3f3f3f;
        }

        /* Short badge */
        .short-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background-color: #ff0000;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Video format indicator */
        .format-indicator {
            position: absolute;
            top: 8px;
            left: 8px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
        }

        /* Edit profile modal */
        .avatar-options {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .avatar-option {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .avatar-option.selected {
            border-color: #ff0000;
        }

        .avatar-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .avatar-upload {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #121212;
            border: 2px dashed #3f3f3f;
        }

        /* Report modal */
        .report-reasons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .report-reason {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background-color: #272727;
            border-radius: 8px;
            cursor: pointer;
        }

        .report-reason:hover {
            background-color: #3f3f3f;
        }

        .report-reason input[type="radio"] {
            width: 18px;
            height: 18px;
        }

        /* Comment actions */
        .comment-actions {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 8px;
        }

        .comment-action-btn {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            font-size: 12px;
            padding: 4px;
        }

        .comment-action-btn:hover {
            color: white;
        }

        /* Notifications dropdown */
        .notifications-dropdown {
            position: absolute;
            top: 56px;
            right: 100px;
            background-color: #272727;
            border-radius: 8px;
            width: 320px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
        }

        .notifications-dropdown.show {
            display: block;
        }

        .notifications-header {
            padding: 16px;
            font-weight: bold;
            font-size: 16px;
            border-bottom: 1px solid #3f3f3f;
        }

        .notification-item {
            padding: 12px 16px;
            border-bottom: 1px solid #3f3f3f;
            cursor: pointer;
        }

        .notification-item.unread {
            background-color: rgba(62, 166, 255, 0.1);
        }

        .notification-item:hover {
            background-color: #3f3f3f;
        }

        .notification-content {
            font-size: 14px;
            margin-bottom: 4px;
        }

        .notification-time {
            font-size: 12px;
            color: #aaa;
        }

        /* Subscriptions page */
        .subscriptions-container {
            padding: 24px;
        }

        .subscriptions-title {
            font-size: 20px;
            margin-bottom: 24px;
        }

        .subscriptions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .subscription-channel-card {
            background-color: #272727;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .subscription-channel-card:hover {
            transform: translateY(-4px);
        }

        .subscription-channel-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 12px;
            overflow: hidden;
            background-color: #3ea6ff;
        }

        .subscription-channel-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .subscription-channel-name {
            font-weight: bold;
            margin-bottom: 4px;
            font-size: 16px;
        }

        .subscription-channel-stats {
            font-size: 12px;
            color: #aaa;
        }

        /* Search results */
        .search-results-container {
            padding: 24px;
        }

        .search-results-title {
            font-size: 20px;
            margin-bottom: 24px;
        }

        .search-results-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 1px solid #3f3f3f;
            padding-bottom: 8px;
        }

        .search-tab {
            background: none;
            border: none;
            color: #aaa;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 3px solid transparent;
        }

        .search-tab.active {
            color: white;
            border-bottom-color: #ff0000;
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .sidebar {
                width: 72px;
                padding: 12px 4px;
            }
            
            .sidebar span, .sidebar-title {
                display: none;
            }
            
            .sidebar-item {
                justify-content: center;
                padding: 16px 0;
            }
            
            .sidebar-item i {
                margin-right: 0;
                font-size: 24px;
            }
            
            .main-content {
                margin-left: 72px;
            }
            
            .player-container {
                flex-direction: column;
            }
            
            #main-video {
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            .search-container {
                flex: 0 1 300px;
            }
            
            #main-video {
                height: 300px;
            }
            
            .video-stats {
                flex-direction: column;
                gap: 8px;
            }
            
            .channel-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-stats {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 0 12px;
            }
            
            .search-container {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .sidebar {
                display: none;
            }
            
            .home-container, .player-container {
                padding: 12px;
            }
            
            #main-video {
                height: 200px;
            }
            
            .videos-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <i class="fab fa-youtube"></i>
            <span>YOUREBE</span>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-item active" data-section="home">
                <i class="fas fa-home"></i>
                <span>Accueil</span>
            </div>
            <div class="sidebar-item" data-section="shorts">
                <i class="fas fa-bolt"></i>
                <span>Shorts</span>
            </div>
            <div class="sidebar-item" data-section="subscriptions">
                <i class="fas fa-user-friends"></i>
                <span>Abonnements</span>
            </div>
        </div>
        
        <div class="sidebar-title">VOUS</div>
        <div class="sidebar-item" data-section="library">
            <i class="fas fa-book"></i>
            <span>Bibliothèque</span>
        </div>
        <div class="sidebar-item" data-section="history">
            <i class="fas fa-history"></i>
            <span>Historique</span>
        </div>
        
        <div class="sidebar-footer">
            <p>© 2023 YOUREBE</p>
            <p>Plateforme de partage vidéo</p>
        </div>
    </div>
    
    <!-- Main content -->
    <div class="main-content">
        <!-- Header -->
        <header>
            <div class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="Rechercher vidéos, chaînes...">
                <button class="search-button" id="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <div class="header-right">
                <button class="upload-btn" id="open-upload-modal">
                    <i class="fas fa-upload"></i>
                    Importer
                </button>
                <div class="user-avatar" id="user-menu-btn">
                    <!-- Avatar will be loaded here -->
                </div>
            </div>
        </header>
        
        <!-- Profile dropdown -->
        <div class="profile-dropdown" id="profile-dropdown">
            <div class="profile-dropdown-header">
                <div class="profile-dropdown-avatar" id="dropdown-avatar">
                    <!-- Avatar will be loaded here -->
                </div>
                <div class="profile-dropdown-name" id="dropdown-name">Utilisateur</div>
            </div>
            
            <div class="profile-dropdown-stats">
                <div class="dropdown-stat">
                    <span class="dropdown-stat-value" id="dropdown-videos">0</span>
                    <span class="dropdown-stat-label">Vidéos</span>
                </div>
                <div class="dropdown-stat">
                    <span class="dropdown-stat-value" id="dropdown-views">0</span>
                    <span class="dropdown-stat-label">Vues</span>
                </div>
                <div class="dropdown-stat">
                    <span class="dropdown-stat-value" id="dropdown-subscribers">0</span>
                    <span class="dropdown-stat-label">Abonnés</span>
                </div>
            </div>
            
            <div class="profile-dropdown-item" id="view-profile-btn">
                <i class="fas fa-user"></i>
                <span>Voir mon profil</span>
            </div>
            <div class="profile-dropdown-item" id="edit-profile-btn">
                <i class="fas fa-edit"></i>
                <span>Modifier mon profil</span>
            </div>
            <div class="profile-dropdown-item" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Déconnexion</span>
            </div>
        </div>
        
        <!-- Home section -->
        <div class="content-section active" id="home-section">
            <div class="home-container">
                <div class="category-filters">
                    <button class="category-filter active" data-category="all">Tous</button>
                    <button class="category-filter" data-category="music">Musique</button>
                    <button class="category-filter" data-category="gaming">Gaming</button>
                    <button class="category-filter" data-category="tech">Technologie</button>
                    <button class="category-filter" data-category="cooking">Cuisine</button>
                    <button class="category-filter" data-category="sports">Sport</button>
                    <button class="category-filter" data-category="education">Éducation</button>
                    <button class="category-filter" data-category="entertainment">Divertissement</button>
                </div>
                
                <div class="videos-grid" id="videos-grid">
                    <!-- Videos will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Shorts section -->
        <div class="content-section" id="shorts-section">
            <div class="shorts-container">
                <div class="shorts-title">
                    <i class="fas fa-bolt"></i>
                    <span>Shorts</span>
                </div>
                <div class="shorts-grid" id="shorts-grid">
                    <!-- Shorts will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Subscriptions section -->
        <div class="content-section" id="subscriptions-section">
            <div class="subscriptions-container">
                <h2 class="subscriptions-title">Abonnements</h2>
                <div class="subscriptions-grid" id="subscriptions-grid">
                    <!-- Subscriptions will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Search results section -->
        <div class="content-section" id="search-section">
            <div class="search-results-container">
                <h2 class="search-results-title" id="search-results-title">Résultats de recherche</h2>
                <div class="search-results-tabs">
                    <button class="search-tab active" data-search-tab="videos">Vidéos</button>
                    <button class="search-tab" data-search-tab="channels">Chaînes</button>
                </div>
                <div id="search-videos-results">
                    <!-- Search video results will be loaded here -->
                </div>
                <div id="search-channels-results" style="display: none;">
                    <!-- Search channel results will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Profile section -->
        <div class="content-section" id="profile-section">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar-large" id="profile-large-avatar">
                        <!-- Avatar will be loaded here -->
                    </div>
                    <div class="profile-info">
                        <h1 class="profile-name" id="profile-display-name">Utilisateur</h1>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="profile-total-videos">0</span>
                                <span class="stat-label">Vidéos</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="profile-total-views">0</span>
                                <span class="stat-label">Vues totales</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="profile-subscribers">0</span>
                                <span class="stat-label">Abonnés</span>
                            </div>
                        </div>
                    </div>
                    <button class="profile-edit-btn" id="edit-profile-from-page">
                        <i class="fas fa-edit"></i>
                        <span>Modifier le profil</span>
                    </button>
                </div>
                
                <div class="profile-tabs">
                    <button class="profile-tab active" data-profile-tab="videos">Vidéos</button>
                    <button class="profile-tab" data-profile-tab="shorts">Shorts</button>
                </div>
                
                <div class="profile-videos-grid" id="profile-videos-container">
                    <!-- Profile videos will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Library section -->
        <div class="content-section" id="library-section">
            <div class="library-container">
                <h2 class="library-title">Bibliothèque</h2>
                <div class="library-actions">
                    <button class="library-action-btn active" data-library-tab="my-videos">
                        <i class="fas fa-video"></i>
                        <span>Mes vidéos</span>
                    </button>
                    <button class="library-action-btn" data-library-tab="liked-videos">
                        <i class="fas fa-thumbs-up"></i>
                        <span>Vidéos aimées</span>
                    </button>
                    <button class="library-action-btn" data-library-tab="playlists">
                        <i class="fas fa-list"></i>
                        <span>Playlists</span>
                    </button>
                </div>
                <div class="library-content" id="library-content">
                    <!-- Library content will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- History section -->
        <div class="content-section" id="history-section">
            <div class="history-container">
                <h2 class="history-title">Historique</h2>
                <div class="history-actions">
                    <button class="history-clear-btn" id="clear-history">
                        <i class="fas fa-trash"></i>
                        <span>Effacer l'historique</span>
                    </button>
                </div>
                <div class="videos-grid" id="history-grid">
                    <!-- History videos will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Video player section -->
        <div class="content-section" id="player-section">
            <div class="player-container">
                <div class="player-section">
                    <div class="video-container">
                        <video id="main-video" controls>
                            <source id="video-source" src="" type="video/mp4">
                            Votre navigateur ne supporte pas la balise vidéo.
                        </video>
                    </div>
                    
                    <div class="video-info-container">
                        <h1 class="video-title" id="video-title"></h1>
                        <div class="video-stats">
                            <span id="video-views"></span>
                            <span id="video-date"></span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn" id="like-btn">
                                <i class="fas fa-thumbs-up"></i>
                                <span id="like-count">0</span>
                            </button>
                            <button class="action-btn" id="dislike-btn">
                                <i class="fas fa-thumbs-down"></i>
                                <span>Pas pour moi</span>
                            </button>
                            <button class="action-btn" id="share-btn">
                                <i class="fas fa-share"></i>
                                <span>Partager</span>
                            </button>
                            <button class="action-btn" id="save-btn">
                                <i class="fas fa-bookmark"></i>
                                <span>Sauvegarder</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="channel-info">
                        <div class="channel-details">
                            <div class="channel-avatar" id="channel-avatar"></div>
                            <div>
                                <div class="channel-name" id="channel-name"></div>
                                <div class="subscriber-count" id="subscriber-count"></div>
                            </div>
                        </div>
                        <button class="subscribe-btn" id="subscribe-btn">S'abonner</button>
                    </div>
                    
                    <div class="comments-section">
                        <h3 class="comments-title" id="comments-count">0 commentaire</h3>
                        
                        <div class="comment-form">
                            <div class="user-comment-avatar" id="comment-user-avatar">
                                <!-- User avatar will be loaded here -->
                            </div>
                            <div class="comment-input-container">
                                <input type="text" class="comment-input" id="comment-input" placeholder="Ajouter un commentaire public...">
                                <button class="comment-submit-btn" id="comment-submit-btn">Commenter</button>
                            </div>
                        </div>
                        
                        <div class="comment-list" id="comment-list">
                            <!-- Comments will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <div class="recommended-section">
                    <h3 class="recommended-title">À suivre</h3>
                    <div class="recommended-videos" id="recommended-videos">
                        <!-- Recommended videos will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Upload modal -->
    <div class="modal-overlay" id="upload-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Importer une vidéo</h2>
                <button class="close-modal" id="close-upload-modal">&times;</button>
            </div>
            
            <form id="upload-form">
                <div class="form-group">
                    <label for="video-file" class="form-label">Sélectionner une vidéo</label>
                    <div class="file-upload" id="file-upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <p>Glissez-déposez votre fichier vidéo ici ou cliquez pour parcourir</p>
                        <input type="file" id="video-file" class="file-input" accept="video/*">
                    </div>
                    <p id="file-name" style="margin-top: 8px; font-size: 14px; color: #aaa;"></p>
                </div>
                
                <div class="form-group">
                    <label for="video-title-input" class="form-label">Titre de la vidéo</label>
                    <input type="text" id="video-title-input" class="form-input" placeholder="Titre accrocheur..." required>
                </div>
                
                <div class="form-group">
                    <label for="video-description" class="form-label">Description</label>
                    <textarea id="video-description" class="form-textarea" placeholder="Décrivez votre vidéo..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="video-category" class="form-label">Catégorie</label>
                    <select id="video-category" class="form-input">
                        <option value="general">Général</option>
                        <option value="music">Musique</option>
                        <option value="gaming">Gaming</option>
                        <option value="tech">Technologie</option>
                        <option value="cooking">Cuisine</option>
                        <option value="sports">Sport</option>
                        <option value="education">Éducation</option>
                        <option value="entertainment">Divertissement</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="video-thumbnail-upload" class="form-label">Miniature (optionnel)</label>
                    <input type="file" id="video-thumbnail-upload" class="form-input" accept="image/*">
                    <p style="margin-top: 8px; font-size: 14px; color: #aaa;">Vous pouvez également ajouter une miniature plus tard en modifiant la vidéo</p>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-upload">Annuler</button>
                    <button type="submit" class="btn-primary">Publier la vidéo</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Edit profile modal -->
    <div class="modal-overlay" id="profile-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Modifier le profil</h2>
                <button class="close-modal" id="close-profile-modal">&times;</button>
            </div>
            
            <form id="profile-form">
                <div class="form-group">
                    <label for="profile-name-input" class="form-label">Nom d'utilisateur</label>
                    <input type="text" id="profile-name-input" class="form-input" placeholder="Votre nom d'utilisateur..." required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Avatar</label>
                    <div class="avatar-options" id="avatar-options">
                        <!-- Avatar options will be loaded here -->
                    </div>
                    <p style="margin-top: 8px; font-size: 14px; color: #aaa;">Ou téléchargez votre propre image :</p>
                    <input type="file" id="custom-avatar" class="form-input" accept="image/*" style="margin-top: 8px;">
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-profile">Annuler</button>
                    <button type="submit" class="btn-primary">Enregistrer les modifications</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Thumbnail editor modal -->
    <div class="modal-overlay" id="thumbnail-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Modifier la miniature</h2>
                <button class="close-modal" id="close-thumbnail-modal">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Choisir une miniature</label>
                <div class="thumbnail-options" id="thumbnail-selector">
                    <!-- Thumbnail options will be loaded here -->
                </div>
                <p style="margin-top: 12px; font-size: 14px; color: #aaa;">Ou téléchargez votre propre image :</p>
                <input type="file" id="new-thumbnail" class="form-input" accept="image/*" style="margin-top: 8px;">
            </div>
            
            <div class="modal-actions">
                <button type="button" class="btn-secondary" id="cancel-thumbnail">Annuler</button>
                <button type="button" class="btn-primary" id="save-thumbnail">Enregistrer</button>
            </div>
        </div>
    </div>
    
    <!-- Report modal -->
    <div class="modal-overlay" id="report-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Signaler un contenu</h2>
                <button class="close-modal" id="close-report-modal">&times;</button>
            </div>
            
            <div class="form-group">
                <p>Veuillez sélectionner une raison pour signaler cette vidéo :</p>
                <div class="report-reasons" id="report-reasons">
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="spam">
                        <span>Spam ou tromperie</span>
                    </label>
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="nudity">
                        <span>Contenu sexuel ou nudité</span>
                    </label>
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="violence">
                        <span>Violence ou contenu choquant</span>
                    </label>
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="harassment">
                        <span>Harcèlement ou intimidation</span>
                    </label>
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="copyright">
                        <span>Violation de droits d'auteur</span>
                    </label>
                    <label class="report-reason">
                        <input type="radio" name="report-reason" value="other">
                        <span>Autre</span>
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="report-details" class="form-label">Détails supplémentaires (optionnel)</label>
                    <textarea id="report-details" class="form-textarea" placeholder="Fournissez plus de détails sur le problème..."></textarea>
                </div>
            </div>
            
            <div class="modal-actions">
                <button type="button" class="btn-secondary" id="cancel-report">Annuler</button>
                <button type="button" class="btn-primary" id="submit-report">Signaler</button>
            </div>
        </div>
    </div>
    
    <script>
        // Clé pour le stockage local
        const STORAGE_KEYS = {
            // DONNÉES PARTAGÉES (Simulation de base de données)
            SHARED_VIDEOS: 'yourebe_shared_videos',
            SHARED_SHORTS: 'yourebe_shared_shorts',
            SHARED_CHANNELS: 'yourebe_shared_channels',
            SHARED_COMMENTS: 'yourebe_shared_comments',
            SHARED_REPORTS: 'yourebe_shared_reports',
            
            // DONNÉES PERSONNELLES (Spécifiques à chaque appareil)
            USER_PROFILE: 'yourebe_user_profile',
            LIKED_VIDEOS: 'yourebe_liked_videos',
            HISTORY: 'yourebe_history',
            SAVED_VIDEOS: 'yourebe_saved_videos',
            SUBSCRIPTIONS: 'yourebe_subscriptions',
            VIEWS_TRACKING: 'yourebe_views_tracking'
        };

        // Gestion des données avec stockage local
        class YourebeApp {
            constructor() {
                // DONNÉES PARTAGÉES (visibles sur tous les appareils)
                this.videos = this.loadSharedData(STORAGE_KEYS.SHARED_VIDEOS) || this.getInitialVideos();
                this.shorts = this.loadSharedData(STORAGE_KEYS.SHARED_SHORTS) || this.getInitialShorts();
                this.channels = this.loadSharedData(STORAGE_KEYS.SHARED_CHANNELS) || this.getInitialChannels();
                this.comments = this.loadSharedData(STORAGE_KEYS.SHARED_COMMENTS) || [];
                this.reports = this.loadSharedData(STORAGE_KEYS.SHARED_REPORTS) || [];
                
                // DONNÉES PERSONNELLES (spécifiques à chaque appareil)
                this.userProfile = this.loadFromStorage(STORAGE_KEYS.USER_PROFILE) || this.getDefaultProfile();
                this.likedVideos = this.loadFromStorage(STORAGE_KEYS.LIKED_VIDEOS) || [];
                this.watchHistory = this.loadFromStorage(STORAGE_KEYS.HISTORY) || [];
                this.savedVideos = this.loadFromStorage(STORAGE_KEYS.SAVED_VIDEOS) || [];
                this.subscriptions = this.loadFromStorage(STORAGE_KEYS.SUBSCRIPTIONS) || [];
                this.viewsTracking = this.loadFromStorage(STORAGE_KEYS.VIEWS_TRACKING) || {};
                
                this.currentVideoId = null;
                this.currentSection = "home";
                this.libraryTab = "my-videos";
                this.profileTab = "videos";
                this.selectedThumbnail = "default";
                this.searchTab = "videos";
                
                // S'assurer que l'utilisateur actuel est dans les chaînes partagées
                this.addUserToSharedChannels();
                
                // Synchronisation au démarrage
                this.syncWithSharedData();
            }
            
            // Méthodes pour les données partagées
            loadSharedData(key) {
                try {
                    const data = localStorage.getItem(key);
                    return data ? JSON.parse(data) : null;
                } catch (e) {
                    console.error('Erreur de chargement des données partagées:', e);
                    return null;
                }
            }
            
            saveSharedData(key, data) {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.error('Erreur de sauvegarde des données partagées:', e);
                    return false;
                }
            }
            
            // Méthodes pour les données personnelles
            loadFromStorage(key) {
                try {
                    const data = localStorage.getItem(key);
                    return data ? JSON.parse(data) : null;
                } catch (e) {
                    console.error('Erreur de chargement:', e);
                    return null;
                }
            }
            
            saveToStorage(key, data) {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.error('Erreur de sauvegarde:', e);
                    return false;
                }
            }
            
            // Synchronisation avec les données partagées
            syncWithSharedData() {
                // Vérifier si l'utilisateur a déjà des vidéos dans les données partagées
                const userVideosInShared = this.videos.filter(v => v.creatorId === this.userProfile.username);
                const userShortsInShared = this.shorts.filter(v => v.creatorId === this.userProfile.username);
                
                // Si l'utilisateur a un profil mais pas de vidéos dans les données partagées,
                // on pourrait éventuellement migrer ses vidéos personnelles vers les données partagées
                // Pour l'instant, on se contente de synchroniser les chaînes
            }
            
            getDefaultProfile() {
                // Générer un nom d'utilisateur aléatoire pour différencier les utilisateurs
                const randomNames = ["Alex", "Jordan", "Taylor", "Casey", "Riley", "Skyler", "Morgan", "Dakota"];
                const randomName = randomNames[Math.floor(Math.random() * randomNames.length)] + Math.floor(Math.random() * 1000);
                
                return {
                    username: randomName,
                    avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${randomName}&backgroundColor=3ea6ff`,
                    subscribers: 0,
                    totalViews: 0,
                    videoCount: 0,
                    isAdmin: false,
                    deviceId: this.generateDeviceId()
                };
            }
            
            generateDeviceId() {
                // Générer un ID d'appareil unique
                return 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }
            
            getInitialVideos() {
                // Vidéos initiales visibles par tous
                return [
                    {
                        id: 1,
                        title: "Introduction à la programmation web",
                        description: "Apprenez les bases du HTML, CSS et JavaScript",
                        views: 1250,
                        likes: 89,
                        dislikes: 2,
                        comments: 12,
                        channel: "Tech Academy",
                        channelId: "techacademy",
                        channelAvatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=TechAcademy&backgroundColor=3ea6ff",
                        subscribers: "12500",
                        date: "15 mars 2023",
                        videoUrl: "#",
                        thumbnail: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        duration: "12:45",
                        category: "education",
                        isShort: false,
                        aspectRatio: "16:9",
                        uploadedByUser: false,
                        saved: false,
                        createdAt: "2023-03-15T10:30:00Z",
                        creatorId: "techacademy"
                    },
                    {
                        id: 2,
                        title: "Recette de crêpes facile",
                        description: "Découvrez comment faire des crêpes parfaites en 10 minutes",
                        views: 850,
                        likes: 64,
                        dislikes: 1,
                        comments: 8,
                        channel: "Cooking Master",
                        channelId: "cookingmaster",
                        channelAvatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Cooking&backgroundColor=51cf66",
                        subscribers: "8500",
                        date: "20 février 2023",
                        videoUrl: "#",
                        thumbnail: "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        duration: "8:20",
                        category: "cooking",
                        isShort: false,
                        aspectRatio: "16:9",
                        uploadedByUser: false,
                        saved: false,
                        createdAt: "2023-02-20T14:15:00Z",
                        creatorId: "cookingmaster"
                    }
                ];
            }
            
            getInitialShorts() {
                // Shorts initiaux visibles par tous
                return [
                    {
                        id: 101,
                        title: "Astuce rapide pour coder plus vite",
                        description: "Une petite astuce pour gagner du temps en programmation",
                        views: 3200,
                        likes: 210,
                        dislikes: 5,
                        comments: 15,
                        channel: "Tech Academy",
                        channelId: "techacademy",
                        channelAvatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=TechAcademy&backgroundColor=3ea6ff",
                        subscribers: "12500",
                        date: "10 mars 2023",
                        videoUrl: "#",
                        thumbnail: "https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        duration: "0:45",
                        category: "education",
                        isShort: true,
                        aspectRatio: "9:16",
                        uploadedByUser: false,
                        saved: false,
                        createdAt: "2023-03-10T09:45:00Z",
                        creatorId: "techacademy"
                    }
                ];
            }
            
            getInitialChannels() {
                return [
                    {
                        id: "techacademy",
                        username: "Tech Academy",
                        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=TechAcademy&backgroundColor=3ea6ff",
                        subscribers: 12500,
                        videos: 42,
                        description: "Apprenez la programmation et les technologies web"
                    },
                    {
                        id: "cookingmaster",
                        username: "Cooking Master",
                        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Cooking&backgroundColor=51cf66",
                        subscribers: 8500,
                        videos: 36,
                        description: "Recettes de cuisine faciles et délicieuses"
                    },
                    {
                        id: "gamingpro",
                        username: "Gaming Pro",
                        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Gaming&backgroundColor=fcc419",
                        subscribers: 21500,
                        videos: 78,
                        description: "Gameplay, astuces et actualités gaming"
                    }
                ];
            }
            
            addUserToSharedChannels() {
                // Vérifier si l'utilisateur est déjà dans les chaînes partagées
                const userExists = this.channels.some(channel => channel.id === this.userProfile.username.toLowerCase().replace(/\s+/g, ''));
                
                if (!userExists) {
                    // Ajouter l'utilisateur aux chaînes partagées
                    this.channels.push({
                        id: this.userProfile.username.toLowerCase().replace(/\s+/g, ''),
                        username: this.userProfile.username,
                        avatar: this.userProfile.avatar,
                        subscribers: this.userProfile.subscribers,
                        videos: this.getUserVideosFromShared().length,
                        description: "Chaîne personnelle"
                    });
                    
                    // Sauvegarder les chaînes mises à jour
                    this.saveSharedData(STORAGE_KEYS.SHARED_CHANNELS, this.channels);
                }
            }
            
            // Gestion du profil utilisateur
            updateProfile(updates) {
                const oldUsername = this.userProfile.username;
                this.userProfile = { ...this.userProfile, ...updates };
                this.saveToStorage(STORAGE_KEYS.USER_PROFILE, this.userProfile);
                
                // Mettre à jour la chaîne correspondante dans les données partagées
                this.updateUserInSharedChannels(oldUsername);
                
                return true;
            }
            
            updateUserInSharedChannels(oldUsername) {
                const oldChannelId = oldUsername.toLowerCase().replace(/\s+/g, '');
                const newChannelId = this.userProfile.username.toLowerCase().replace(/\s+/g, '');
                
                // Trouver l'index de l'ancienne chaîne
                const channelIndex = this.channels.findIndex(channel => channel.id === oldChannelId);
                
                if (channelIndex !== -1) {
                    // Mettre à jour la chaîne
                    this.channels[channelIndex] = {
                        id: newChannelId,
                        username: this.userProfile.username,
                        avatar: this.userProfile.avatar,
                        subscribers: this.userProfile.subscribers,
                        videos: this.getUserVideosFromShared().length,
                        description: "Chaîne personnelle"
                    };
                    
                    // Mettre à jour toutes les vidéos de l'utilisateur avec le nouveau channelId
                    this.updateUserVideosChannelId(oldChannelId, newChannelId);
                    
                    // Sauvegarder les données partagées
                    this.saveSharedData(STORAGE_KEYS.SHARED_CHANNELS, this.channels);
                }
            }
            
            updateUserVideosChannelId(oldChannelId, newChannelId) {
                // Mettre à jour les vidéos normales
                this.videos = this.videos.map(video => {
                    if (video.channelId === oldChannelId) {
                        return { ...video, channelId: newChannelId, channel: this.userProfile.username };
                    }
                    return video;
                });
                
                // Mettre à jour les shorts
                this.shorts = this.shorts.map(short => {
                    if (short.channelId === oldChannelId) {
                        return { ...short, channelId: newChannelId, channel: this.userProfile.username };
                    }
                    return short;
                });
                
                // Sauvegarder les données partagées
                this.saveSharedData(STORAGE_KEYS.SHARED_VIDEOS, this.videos);
                this.saveSharedData(STORAGE_KEYS.SHARED_SHORTS, this.shorts);
            }
            
            getProfileStats() {
                const userVideos = this.getUserVideosFromShared();
                const totalViews = userVideos.reduce((sum, video) => sum + video.views, 0);
                const videoCount = userVideos.length;
                
                return {
                    username: this.userProfile.username,
                    avatar: this.userProfile.avatar,
                    subscribers: this.userProfile.subscribers,
                    totalViews: totalViews,
                    videoCount: videoCount,
                    isAdmin: this.userProfile.isAdmin
                };
            }
            
            // Gestion des abonnements
            toggleSubscription(channelId) {
                const index = this.subscriptions.indexOf(channelId);
                const channel = this.getChannelById(channelId);
                
                if (index === -1) {
                    // S'abonner
                    this.subscriptions.push(channelId);
                    if (channel) {
                        // Augmenter le nombre d'abonnés de la chaîne
                        this.increaseChannelSubscribers(channelId);
                    }
                } else {
                    // Se désabonner
                    this.subscriptions.splice(index, 1);
                    if (channel) {
                        // Diminuer le nombre d'abonnés de la chaîne
                        this.decreaseChannelSubscribers(channelId);
                    }
                }
                
                this.saveToStorage(STORAGE_KEYS.SUBSCRIPTIONS, this.subscriptions);
                return index === -1; // Retourne true si nouvel abonnement, false si désabonnement
            }
            
            increaseChannelSubscribers(channelId) {
                const channelIndex = this.channels.findIndex(channel => channel.id === channelId);
                if (channelIndex !== -1) {
                    this.channels[channelIndex].subscribers++;
                    this.saveSharedData(STORAGE_KEYS.SHARED_CHANNELS, this.channels);
                    
                    // Si c'est la chaîne de l'utilisateur actuel, mettre à jour son profil
                    if (channelId === this.userProfile.username.toLowerCase().replace(/\s+/g, '')) {
                        this.userProfile.subscribers++;
                        this.saveToStorage(STORAGE_KEYS.USER_PROFILE, this.userProfile);
                    }
                }
            }
            
            decreaseChannelSubscribers(channelId) {
                const channelIndex = this.channels.findIndex(channel => channel.id === channelId);
                if (channelIndex !== -1 && this.channels[channelIndex].subscribers > 0) {
                    this.channels[channelIndex].subscribers--;
                    this.saveSharedData(STORAGE_KEYS.SHARED_CHANNELS, this.channels);
                    
                    // Si c'est la chaîne de l'utilisateur actuel, mettre à jour son profil
                    if (channelId === this.userProfile.username.toLowerCase().replace(/\s+/g, '')) {
                        this.userProfile.subscribers = Math.max(0, this.userProfile.subscribers - 1);
                        this.saveToStorage(STORAGE_KEYS.USER_PROFILE, this.userProfile);
                    }
                }
            }
            
            isSubscribed(channelId) {
                return this.subscriptions.includes(channelId);
            }
            
            getSubscribedChannels() {
                return this.channels.filter(channel => this.subscriptions.includes(channel.id));
            }
            
            getChannelById(channelId) {
                return this.channels.find(channel => channel.id === channelId);
            }
            
            // Gestion des vues
            trackView(videoId, userId = 'default') {
                if (!this.viewsTracking[videoId]) {
                    this.viewsTracking[videoId] = {};
                }
                
                const videoTracking = this.viewsTracking[videoId];
                const now = Date.now();
                const thirtySeconds = 30 * 1000;
                
                if (!videoTracking[userId]) {
                    videoTracking[userId] = {
                        lastViewTime: now,
                        viewCount: 1,
                        totalWatchTime: 0
                    };
                } else {
                    const userTracking = videoTracking[userId];
                    const timeSinceLastView = now - userTracking.lastViewTime;
                    
                    if (timeSinceLastView >= thirtySeconds) {
                        userTracking.viewCount += 1;
                        userTracking.lastViewTime = now;
                    }
                    
                    userTracking.totalWatchTime += Math.min(timeSinceLastView, thirtySeconds);
                }
                
                this.saveToStorage(STORAGE_KEYS.VIEWS_TRACKING, this.viewsTracking);
                
                // Mettre à jour le compteur de vues de la vidéo dans les données partagées
                const video = this.getVideoById(videoId);
                if (video) {
                    let totalViews = 0;
                    Object.values(videoTracking).forEach(user => {
                        totalViews += user.viewCount;
                    });
                    
                    video.views = totalViews;
                    this.updateVideoInShared(videoId, { views: video.views });
                }
                
                return videoTracking[userId].viewCount;
            }
            
            // Gestion des vidéos (partagées)
            addVideo(videoData) {
                let newId = 1;
                const allSharedVideos = [...this.videos, ...this.shorts];
                if (allSharedVideos.length > 0) {
                    newId = Math.max(...allSharedVideos.map(v => v.id)) + 1;
                }
                
                const isShort = this.isShortFormat(videoData.aspectRatio);
                const channelId = this.userProfile.username.toLowerCase().replace(/\s+/g, '');
                
                const newVideo = {
                    id: newId,
                    title: videoData.title,
                    description: videoData.description,
                    views: 0,
                    likes: 0,
                    dislikes: 0,
                    comments: 0,
                    channel: this.userProfile.username,
                    channelId: channelId,
                    channelAvatar: this.userProfile.avatar,
                    subscribers: this.userProfile.subscribers.toString(),
                    date: new Date().toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' }),
                    videoUrl: videoData.videoUrl,
                    thumbnail: videoData.thumbnail || this.getDefaultThumbnail(isShort),
                    duration: videoData.duration || "5:30",
                    category: videoData.category || "general",
                    isShort: isShort,
                    aspectRatio: videoData.aspectRatio || "16:9",
                    uploadedByUser: true,
                    saved: false,
                    createdAt: new Date().toISOString(),
                    creatorId: this.userProfile.username
                };
                
                if (isShort) {
                    this.shorts.unshift(newVideo);
                    this.saveSharedData(STORAGE_KEYS.SHARED_SHORTS, this.shorts);
                } else {
                    this.videos.unshift(newVideo);
                    this.saveSharedData(STORAGE_KEYS.SHARED_VIDEOS, this.videos);
                }
                
                // Mettre à jour le nombre de vidéos de la chaîne
                this.updateChannelVideoCount(channelId);
                
                return newVideo;
            }
            
            updateChannelVideoCount(channelId) {
                const channelIndex = this.channels.findIndex(channel => channel.id === channelId);
                if (channelIndex !== -1) {
                    const channelVideos = [...this.videos, ...this.shorts].filter(video => video.channelId === channelId);
                    this.channels[channelIndex].videos = channelVideos.length;
                    this.saveSharedData(STORAGE_KEYS.SHARED_CHANNELS, this.channels);
                }
            }
            
            getDefaultThumbnail(isShort) {
                if (isShort) {
                    const shortThumbnails = [
                        "https://images.unsplash.com/photo-1611605698323-b1e99cfd37ea?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ];
                    return shortThumbnails[Math.floor(Math.random() * shortThumbnails.length)];
                } else {
                    const videoThumbnails = [
                        "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ];
                    return videoThumbnails[Math.floor(Math.random() * videoThumbnails.length)];
                }
            }
            
            isShortFormat(aspectRatio) {
                if (!aspectRatio) return false;
                const shortRatios = ["9:16", "1:1", "4:5", "4:3", "2:3"];
                return shortRatios.includes(aspectRatio);
            }
            
            getVideoById(id) {
                return this.videos.find(v => v.id == id) || this.shorts.find(v => v.id == id);
            }
            
            updateVideoInShared(id, updates) {
                let videoIndex = this.videos.findIndex(v => v.id == id);
                if (videoIndex !== -1) {
                    this.videos[videoIndex] = { ...this.videos[videoIndex], ...updates };
                    this.saveSharedData(STORAGE_KEYS.SHARED_VIDEOS, this.videos);
                    return;
                }
                
                videoIndex = this.shorts.findIndex(v => v.id == id);
                if (videoIndex !== -1) {
                    this.shorts[videoIndex] = { ...this.shorts[videoIndex], ...updates };
                    this.saveSharedData(STORAGE_KEYS.SHARED_SHORTS, this.shorts);
                }
            }
            
            // Supprimer une vidéo (uniquement pour les vidéos de l'utilisateur)
            deleteVideo(id) {
                const video = this.getVideoById(id);
                const isUserVideo = video && video.creatorId === this.userProfile.username;
                
                if (!isUserVideo) {
                    alert("Vous ne pouvez supprimer que vos propres vidéos.");
                    return false;
                }
                
                const wasInVideos = this.videos.some(v => v.id == id);
                const wasInShorts = this.shorts.some(v => v.id == id);
                
                // Supprimer des données partagées
                this.videos = this.videos.filter(v => v.id != id);
                this.shorts = this.shorts.filter(v => v.id != id);
                
                // Supprimer des données personnelles
                this.likedVideos = this.likedVideos.filter(vid => vid != id);
                this.savedVideos = this.savedVideos.filter(vid => vid != id);
                
                // Supprimer les commentaires associés
                this.comments = this.comments.filter(c => c.videoId != id);
                
                // Sauvegarder les données partagées
                if (wasInVideos) {
                    this.saveSharedData(STORAGE_KEYS.SHARED_VIDEOS, this.videos);
                }
                if (wasInShorts) {
                    this.saveSharedData(STORAGE_KEYS.SHARED_SHORTS, this.shorts);
                }
                
                // Sauvegarder les données personnelles
                this.saveToStorage(STORAGE_KEYS.LIKED_VIDEOS, this.likedVideos);
                this.saveToStorage(STORAGE_KEYS.SAVED_VIDEOS, this.savedVideos);
                this.saveSharedData(STORAGE_KEYS.SHARED_COMMENTS, this.comments);
                
                // Mettre à jour le nombre de vidéos de la chaîne
                this.updateChannelVideoCount(this.userProfile.username.toLowerCase().replace(/\s+/g, ''));
                
                return true;
            }
            
            // Signaler une vidéo
            reportVideo(videoId, reason, details = '') {
                const video = this.getVideoById(videoId);
                if (!video) return false;
                
                const report = {
                    id: this.reports.length + 1,
                    videoId: videoId,
                    videoTitle: video.title,
                    reporter: this.userProfile.username,
                    reason: reason,
                    details: details,
                    date: new Date().toISOString(),
                    status: 'pending'
                };
                
                this.reports.push(report);
                this.saveSharedData(STORAGE_KEYS.SHARED_REPORTS, this.reports);
                
                return true;
            }
            
            // Gestion des commentaires (partagés)
            addComment(videoId, content) {
                if (!content.trim()) return;
                
                const newComment = {
                    id: this.comments.length + 1,
                    videoId: videoId,
                    author: this.userProfile.username,
                    authorAvatar: this.userProfile.avatar,
                    content: content,
                    time: "À l'instant",
                    likes: 0,
                    createdAt: new Date().toISOString(),
                    canDelete: true
                };
                
                this.comments.unshift(newComment);
                this.saveSharedData(STORAGE_KEYS.SHARED_COMMENTS, this.comments);
                
                // Mettre à jour le compteur de commentaires de la vidéo
                const video = this.getVideoById(videoId);
                if (video) {
                    video.comments++;
                    this.updateVideoInShared(videoId, { comments: video.comments });
                }
                
                return newComment;
            }
            
            deleteComment(commentId) {
                const commentIndex = this.comments.findIndex(c => c.id == commentId);
                if (commentIndex === -1) return false;
                
                const comment = this.comments[commentIndex];
                const isUserComment = comment.author === this.userProfile.username;
                
                if (!isUserComment) {
                    alert("Vous ne pouvez supprimer que vos propres commentaires.");
                    return false;
                }
                
                // Décrémenter le compteur de commentaires de la vidéo
                const video = this.getVideoById(comment.videoId);
                if (video && video.comments > 0) {
                    video.comments--;
                    this.updateVideoInShared(comment.videoId, { comments: video.comments });
                }
                
                // Supprimer le commentaire
                this.comments.splice(commentIndex, 1);
                this.saveSharedData(STORAGE_KEYS.SHARED_COMMENTS, this.comments);
                
                return true;
            }
            
            getCommentsForVideo(videoId) {
                const comments = this.comments.filter(c => c.videoId == videoId);
                return comments.map(comment => ({
                    ...comment,
                    canDelete: comment.author === this.userProfile.username
                }));
            }
            
            // Gestion de l'historique (personnel)
            addToHistory(videoId) {
                this.watchHistory = this.watchHistory.filter(id => id != videoId);
                this.watchHistory.unshift(videoId);
                
                if (this.watchHistory.length > 50) {
                    this.watchHistory.pop();
                }
                
                this.saveToStorage(STORAGE_KEYS.HISTORY, this.watchHistory);
            }
            
            clearHistory() {
                this.watchHistory = [];
                this.saveToStorage(STORAGE_KEYS.HISTORY, this.watchHistory);
            }
            
            // Gestion des likes/dislikes (personnels)
            toggleLike(videoId) {
                const index = this.likedVideos.indexOf(videoId);
                const video = this.getVideoById(videoId);
                
                if (index === -1) {
                    this.likedVideos.push(videoId);
                    if (video) {
                        video.likes++;
                        this.updateVideoInShared(videoId, { likes: video.likes });
                    }
                } else {
                    this.likedVideos.splice(index, 1);
                    if (video && video.likes > 0) {
                        video.likes--;
                        this.updateVideoInShared(videoId, { likes: video.likes });
                    }
                }
                
                this.saveToStorage(STORAGE_KEYS.LIKED_VIDEOS, this.likedVideos);
                return index === -1;
            }
            
            addDislike(videoId) {
                const video = this.getVideoById(videoId);
                if (video) {
                    video.dislikes++;
                    this.updateVideoInShared(videoId, { dislikes: video.dislikes });
                }
            }
            
            // Gestion des sauvegardes (personnelles)
            toggleSave(videoId) {
                const index = this.savedVideos.indexOf(videoId);
                const video = this.getVideoById(videoId);
                
                if (index === -1) {
                    this.savedVideos.push(videoId);
                    if (video) {
                        video.saved = true;
                        this.updateVideoInShared(videoId, { saved: true });
                    }
                } else {
                    this.savedVideos.splice(index, 1);
                    if (video) {
                        video.saved = false;
                        this.updateVideoInShared(videoId, { saved: false });
                    }
                }
                
                this.saveToStorage(STORAGE_KEYS.SAVED_VIDEOS, this.savedVideos);
                return index === -1;
            }
            
            // Recherche
            searchVideos(query) {
                if (!query.trim()) return [];
                
                const searchTerm = query.toLowerCase();
                const allVideos = [...this.videos, ...this.shorts];
                
                return allVideos.filter(video => 
                    video.title.toLowerCase().includes(searchTerm) || 
                    video.description.toLowerCase().includes(searchTerm) ||
                    video.channel.toLowerCase().includes(searchTerm)
                );
            }
            
            searchChannels(query) {
                if (!query.trim()) return [];
                
                const searchTerm = query.toLowerCase();
                
                return this.channels.filter(channel => 
                    channel.username.toLowerCase().includes(searchTerm) ||
                    channel.description.toLowerCase().includes(searchTerm)
                );
            }
            
            // Récupérer les vidéos de l'utilisateur depuis les données partagées
            getUserVideosFromShared() {
                const userChannelId = this.userProfile.username.toLowerCase().replace(/\s+/g, '');
                return [...this.videos, ...this.shorts].filter(v => v.channelId === userChannelId);
            }
            
            // Vérifier si l'utilisateur est propriétaire d'une vidéo
            isVideoOwner(videoId) {
                const video = this.getVideoById(videoId);
                return video && video.creatorId === this.userProfile.username;
            }
            
            // Récupérer les vidéos de l'utilisateur par type
            getUserVideosByType(type) {
                const userVideos = this.getUserVideosFromShared();
                if (type === 'videos') {
                    return userVideos.filter(v => !v.isShort);
                } else if (type === 'shorts') {
                    return userVideos.filter(v => v.isShort);
                }
                return userVideos;
            }
            
            // Filtrer par catégorie
            getVideosByCategory(category) {
                if (category === 'all') {
                    return this.videos;
                }
                return this.videos.filter(video => video.category === category);
            }
            
            // Récupérer les vidéos sauvegardées
            getSavedVideos() {
                return [...this.videos, ...this.shorts].filter(v => this.savedVideos.includes(v.id));
            }
            
            // Récupérer les vidéos des abonnements
            getSubscriptionVideos() {
                const subscribedChannels = this.getSubscribedChannels();
                const channelIds = subscribedChannels.map(channel => channel.id);
                
                return [...this.videos, ...this.shorts].filter(video => 
                    channelIds.includes(video.channelId)
                );
            }
        }

        // Initialiser l'application
        const app = new YourebeApp();
        
        // DOM Elements
        const mainVideo = document.getElementById('main-video');
        const videoSource = document.getElementById('video-source');
        const videoTitle = document.getElementById('video-title');
        const videoViews = document.getElementById('video-views');
        const likeCount = document.getElementById('like-count');
        const commentsCount = document.getElementById('comments-count');
        const commentList = document.getElementById('comment-list');
        const commentInput = document.getElementById('comment-input');
        const commentSubmitBtn = document.getElementById('comment-submit-btn');
        const commentUserAvatar = document.getElementById('comment-user-avatar');
        const recommendedVideosContainer = document.getElementById('recommended-videos');
        const videosGrid = document.getElementById('videos-grid');
        const shortsGrid = document.getElementById('shorts-grid');
        const subscriptionsGrid = document.getElementById('subscriptions-grid');
        const historyGrid = document.getElementById('history-grid');
        const libraryContent = document.getElementById('library-content');
        const profileVideosContainer = document.getElementById('profile-videos-container');
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const subscribeBtn = document.getElementById('subscribe-btn');
        const dislikeBtn = document.getElementById('dislike-btn');
        const shareBtn = document.getElementById('share-btn');
        const saveBtn = document.getElementById('save-btn');
        const categoryFilters = document.querySelectorAll('.category-filter');
        
        // Profile elements
        const userAvatar = document.getElementById('user-menu-btn');
        const profileDropdown = document.getElementById('profile-dropdown');
        const dropdownAvatar = document.getElementById('dropdown-avatar');
        const dropdownName = document.getElementById('dropdown-name');
        const dropdownVideos = document.getElementById('dropdown-videos');
        const dropdownViews = document.getElementById('dropdown-views');
        const dropdownSubscribers = document.getElementById('dropdown-subscribers');
        const viewProfileBtn = document.getElementById('view-profile-btn');
        const editProfileBtn = document.getElementById('edit-profile-btn');
        const editProfileFromPage = document.getElementById('edit-profile-from-page');
        const profileLargeAvatar = document.getElementById('profile-large-avatar');
        const profileDisplayName = document.getElementById('profile-display-name');
        const profileTotalVideos = document.getElementById('profile-total-videos');
        const profileTotalViews = document.getElementById('profile-total-views');
        const profileSubscribers = document.getElementById('profile-subscribers');
        const profileTabs = document.querySelectorAll('.profile-tab');
        
        // Search elements
        const searchVideosResults = document.getElementById('search-videos-results');
        const searchChannelsResults = document.getElementById('search-channels-results');
        const searchResultsTitle = document.getElementById('search-results-title');
        const searchTabs = document.querySelectorAll('.search-tab');
        
        // Modals
        const uploadModal = document.getElementById('upload-modal');
        const profileModal = document.getElementById('profile-modal');
        const thumbnailModal = document.getElementById('thumbnail-modal');
        const reportModal = document.getElementById('report-modal');
        const openUploadModalBtn = document.getElementById('open-upload-modal');
        const closeUploadModalBtn = document.getElementById('close-upload-modal');
        const closeProfileModalBtn = document.getElementById('close-profile-modal');
        const closeReportModalBtn = document.getElementById('close-report-modal');
        const cancelUploadBtn = document.getElementById('cancel-upload');
        const cancelProfileBtn = document.getElementById('cancel-profile');
        const cancelReportBtn = document.getElementById('cancel-report');
        const uploadForm = document.getElementById('upload-form');
        const profileForm = document.getElementById('profile-form');
        const videoFileInput = document.getElementById('video-file');
        const videoTitleInput = document.getElementById('video-title-input');
        const videoDescriptionInput = document.getElementById('video-description');
        const videoCategoryInput = document.getElementById('video-category');
        const videoThumbnailUpload = document.getElementById('video-thumbnail-upload');
        const profileNameInput = document.getElementById('profile-name-input');
        const avatarOptions = document.getElementById('avatar-options');
        const customAvatarInput = document.getElementById('custom-avatar');
        const fileUploadArea = document.getElementById('file-upload-area');
        const fileNameDisplay = document.getElementById('file-name');
        const submitReportBtn = document.getElementById('submit-report');
        const reportDetails = document.getElementById('report-details');
        
        // Variables d'état
        let videoToEdit = null;
        let selectedThumbnailOption = null;
        let currentPlayingVideo = null;
        let customThumbnailFile = null;
        let customAvatarFile = null;
        let selectedAvatarOption = null;
        let videoWatchTimer = null;
        let currentVideoWatchStart = 0;
        let hasCountedView = false;
        let videoToReport = null;
        let commentToDelete = null;
        let currentSearchQuery = '';
        
        // Initialiser l'interface
        function init() {
            // Afficher la section d'accueil
            showSection('home');
            
            // Charger les sections
            loadHomeVideos();
            loadShorts();
            loadLibraryContent();
            
            // Mettre à jour l'avatar utilisateur
            updateUserAvatar();
            updateProfileDropdown();
            
            // Afficher un message de bienvenue avec le nom d'utilisateur
            setTimeout(() => {
                alert(`Bienvenue sur YOUREBE !\n\nVous êtes connecté en tant que : ${app.userProfile.username}\n\nNote : Les vidéos sont maintenant partagées entre tous les appareils !`);
            }, 1000);
            
            // Écouteurs d'événements
            setupEventListeners();
        }
        
        // Afficher une section spécifique
        function showSection(sectionId) {
            // Arrêter la vidéo en cours si on quitte le lecteur
            if (sectionId !== 'player' && currentPlayingVideo) {
                currentPlayingVideo.pause();
                resetVideoTracking();
                currentPlayingVideo = null;
            }
            
            // Cacher toutes les sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Désactiver tous les éléments de la sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Afficher la section demandée
            const sectionElement = document.getElementById(`${sectionId}-section`);
            if (sectionElement) {
                sectionElement.classList.add('active');
                
                // Activer l'élément correspondant dans la sidebar
                const sidebarItem = document.querySelector(`.sidebar-item[data-section="${sectionId}"]`);
                if (sidebarItem) {
                    sidebarItem.classList.add('active');
                }
            }
            
            // Mettre à jour l'état de l'application
            app.currentSection = sectionId;
        }
        
        // Afficher les résultats de recherche
        function showSearchResults(query) {
            currentSearchQuery = query;
            searchResultsTitle.textContent = `Résultats pour "${query}"`;
            app.searchTab = 'videos';
            
            // Activer l'onglet vidéos
            searchTabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector('.search-tab[data-search-tab="videos"]').classList.add('active');
            
            // Afficher les résultats de vidéos
            showSearchVideosResults(query);
            
            // Cacher les résultats de chaînes
            searchChannelsResults.style.display = 'none';
            
            // Afficher la section de recherche
            showSection('search');
        }
        
        // Mettre à jour l'avatar utilisateur
        function updateUserAvatar() {
            const profile = app.userProfile;
            const avatarUrl = profile.avatar;
            
            // Avatar dans le header
            userAvatar.innerHTML = `<img src="${avatarUrl}" alt="${profile.username}" class="user-avatar-img">`;
            
            // Avatar dans le dropdown
            dropdownAvatar.innerHTML = `<img src="${avatarUrl}" alt="${profile.username}" class="user-avatar-img">`;
            dropdownName.textContent = profile.username;
            
            // Avatar dans les commentaires
            commentUserAvatar.innerHTML = `<img src="${avatarUrl}" alt="${profile.username}" class="user-comment-avatar-img">`;
        }
        
        // Mettre à jour le dropdown du profil
        function updateProfileDropdown() {
            const stats = app.getProfileStats();
            
            dropdownVideos.textContent = stats.videoCount;
            dropdownViews.textContent = stats.totalViews;
            dropdownSubscribers.textContent = stats.subscribers;
            dropdownName.textContent = stats.username;
        }
        
        // Charger les vidéos de la page d'accueil
        function loadHomeVideos(category = 'all') {
            videosGrid.innerHTML = '';
            
            const videos = app.getVideosByCategory(category);
            
            if (videos.length === 0) {
                videosGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-video" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucune vidéo disponible</h3>
                        <p>Importez votre première vidéo pour commencer !</p>
                    </div>
                `;
                return;
            }
            
            videos.forEach(video => {
                const videoElement = createVideoCard(video);
                videosGrid.appendChild(videoElement);
            });
        }
        
        // Charger les shorts
        function loadShorts() {
            shortsGrid.innerHTML = '';
            
            if (app.shorts.length === 0) {
                shortsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-bolt" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucun short disponible</h3>
                        <p>Importez une vidéo au format vertical pour créer un short !</p>
                    </div>
                `;
                return;
            }
            
            app.shorts.forEach(short => {
                const shortElement = document.createElement('div');
                shortElement.className = 'short-card';
                shortElement.dataset.id = short.id;
                shortElement.innerHTML = `
                    <div class="short-thumbnail">
                        <div class="short-badge">SHORT</div>
                        <img src="${short.thumbnail}" alt="${short.title}">
                    </div>
                    <div class="short-title">${short.title}</div>
                    <div class="short-views">${short.views} vues</div>
                `;
                
                shortElement.addEventListener('click', () => {
                    playVideo(short.id);
                });
                
                shortsGrid.appendChild(shortElement);
            });
        }
        
        // Charger les abonnements
        function loadSubscriptions() {
            subscriptionsGrid.innerHTML = '';
            
            const subscribedChannels = app.getSubscribedChannels();
            
            if (subscribedChannels.length === 0) {
                subscriptionsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-user-friends" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucun abonnement</h3>
                        <p>Abonnez-vous à des chaînes pour les voir apparaître ici</p>
                    </div>
                `;
                return;
            }
            
            subscribedChannels.forEach(channel => {
                const channelElement = document.createElement('div');
                channelElement.className = 'subscription-channel-card';
                channelElement.dataset.channelId = channel.id;
                channelElement.innerHTML = `
                    <div class="subscription-channel-avatar">
                        <img src="${channel.avatar}" alt="${channel.username}" class="subscription-channel-avatar-img">
                    </div>
                    <div class="subscription-channel-name">${channel.username}</div>
                    <div class="subscription-channel-stats">${channel.subscribers} abonnés • ${channel.videos} vidéos</div>
                `;
                
                channelElement.addEventListener('click', () => {
                    // Rechercher les vidéos de cette chaîne
                    searchInput.value = channel.username;
                    performSearch();
                });
                
                subscriptionsGrid.appendChild(channelElement);
            });
        }
        
        // Charger le profil utilisateur
        function loadProfile() {
            const stats = app.getProfileStats();
            
            // Mettre à jour les informations du profil
            profileDisplayName.textContent = stats.username;
            profileTotalVideos.textContent = stats.videoCount;
            profileTotalViews.textContent = stats.totalViews;
            profileSubscribers.textContent = stats.subscribers;
            
            // Mettre à jour l'avatar
            profileLargeAvatar.innerHTML = `<img src="${stats.avatar}" alt="${stats.username}" class="profile-avatar-large-img">`;
            
            // Charger les vidéos du profil
            loadProfileVideos();
        }
        
        // Charger les vidéos du profil
        function loadProfileVideos() {
            profileVideosContainer.innerHTML = '';
            
            const videos = app.getUserVideosByType(app.profileTab);
            
            if (videos.length === 0) {
                profileVideosContainer.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-video" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucune ${app.profileTab === 'videos' ? 'vidéo' : 'short'} publiée</h3>
                        <p>Importez votre première ${app.profileTab === 'videos' ? 'vidéo' : 'short'} pour commencer !</p>
                    </div>
                `;
                return;
            }
            
            videos.forEach(video => {
                const videoElement = createVideoCard(video, true);
                profileVideosContainer.appendChild(videoElement);
            });
        }
        
        // Charger le contenu de la bibliothèque
        function loadLibraryContent() {
            libraryContent.innerHTML = '';
            
            if (app.libraryTab === 'my-videos') {
                const userVideos = app.getUserVideosFromShared();
                
                if (userVideos.length === 0) {
                    libraryContent.innerHTML = `
                        <div class="empty-library">
                            <i class="fas fa-video"></i>
                            <h3>Aucune vidéo publiée</h3>
                            <p>Les vidéos que vous importez apparaîtront ici</p>
                            <button class="upload-btn" style="margin-top: 16px;" id="import-from-library">Importer une vidéo</button>
                        </div>
                    `;
                    
                    document.getElementById('import-from-library')?.addEventListener('click', () => {
                        openUploadModal();
                    });
                } else {
                    const videosContainer = document.createElement('div');
                    videosContainer.className = 'videos-grid';
                    
                    userVideos.forEach(video => {
                        const videoElement = createVideoCard(video, true);
                        videosContainer.appendChild(videoElement);
                    });
                    
                    libraryContent.appendChild(videosContainer);
                }
            } else if (app.libraryTab === 'liked-videos') {
                const likedVideos = [...app.videos, ...app.shorts].filter(v => app.likedVideos.includes(v.id));
                
                if (likedVideos.length === 0) {
                    libraryContent.innerHTML = `
                        <div class="empty-library">
                            <i class="fas fa-thumbs-up"></i>
                            <h3>Aucune vidéo aimée</h3>
                            <p>Les vidéos que vous aimez apparaîtront ici</p>
                        </div>
                    `;
                } else {
                    const videosContainer = document.createElement('div');
                    videosContainer.className = 'videos-grid';
                    
                    likedVideos.forEach(video => {
                        const videoElement = createVideoCard(video);
                        videosContainer.appendChild(videoElement);
                    });
                    
                    libraryContent.appendChild(videosContainer);
                }
            } else if (app.libraryTab === 'playlists') {
                libraryContent.innerHTML = `
                    <div class="empty-library">
                        <i class="fas fa-list"></i>
                        <h3>Aucune playlist</h3>
                        <p>Créez des playlists pour organiser vos vidéos favorites</p>
                    </div>
                `;
            }
        }
        
        // Charger l'historique
        function loadHistory() {
            historyGrid.innerHTML = '';
            
            if (app.watchHistory.length === 0) {
                historyGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-history" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucun historique</h3>
                        <p>Les vidéos que vous regardez apparaîtront ici</p>
                    </div>
                `;
                return;
            }
            
            app.watchHistory.forEach(videoId => {
                const video = app.getVideoById(videoId);
                if (video) {
                    const videoElement = createVideoCard(video);
                    historyGrid.appendChild(videoElement);
                }
            });
        }
        
        // Créer une carte vidéo avec actions conditionnelles
        function createVideoCard(video, showActions = false) {
            const videoElement = document.createElement('div');
            videoElement.className = 'video-card';
            videoElement.dataset.id = video.id;
            
            // Vérifier si l'utilisateur peut gérer cette vidéo
            const isUserVideo = app.isVideoOwner(video.id);
            
            let actionsMenu = '';
            if (showActions || isUserVideo) {
                actionsMenu = `
                    <div class="video-actions-menu" data-video-id="${video.id}">
                        <i class="fas fa-ellipsis-v"></i>
                        <div class="video-actions-dropdown" id="dropdown-${video.id}">
                            ${isUserVideo ? `
                                <div class="dropdown-item" data-action="edit">
                                    <i class="fas fa-edit"></i>
                                    <span>Modifier</span>
                                </div>
                                <div class="dropdown-item" data-action="edit-thumbnail">
                                    <i class="fas fa-image"></i>
                                    <span>Changer la miniature</span>
                                </div>
                                <div class="dropdown-item" data-action="delete">
                                    <i class="fas fa-trash"></i>
                                    <span>Supprimer</span>
                                </div>
                            ` : ''}
                            ${!isUserVideo ? `
                                <div class="dropdown-item" data-action="report">
                                    <i class="fas fa-flag"></i>
                                    <span>Signaler</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }
            
            // Ajouter un indicateur de format
            const formatIndicator = video.isShort ? `<div class="format-indicator">${video.aspectRatio}</div>` : '';
            
            videoElement.innerHTML = `
                <div class="video-thumbnail-container">
                    <img src="${video.thumbnail}" alt="${video.title}" class="video-thumbnail">
                    <div class="video-duration">${video.duration}</div>
                    ${formatIndicator}
                    ${actionsMenu}
                </div>
                <div class="video-info">
                    <div class="channel-avatar">
                        <img src="${video.channelAvatar}" alt="${video.channel}" class="channel-avatar-img">
                    </div>
                    <div class="video-details">
                        <h3>${video.title}</h3>
                        <p>${video.channel}</p>
                        <p>${video.views} vues • ${video.date}</p>
                    </div>
                </div>
            `;
            
            videoElement.addEventListener('click', (e) => {
                if (!e.target.closest('.video-actions-menu')) {
                    playVideo(video.id);
                }
            });
            
            if (actionsMenu) {
                const actionsMenuElement = videoElement.querySelector('.video-actions-menu');
                const dropdown = videoElement.querySelector('.video-actions-dropdown');
                
                actionsMenuElement.addEventListener('click', (e) => {
                    e.stopPropagation();
                    dropdown.classList.toggle('show');
                });
                
                dropdown.querySelectorAll('.dropdown-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const action = item.dataset.action;
                        handleVideoAction(video.id, action);
                        dropdown.classList.remove('show');
                    });
                });
                
                document.addEventListener('click', () => {
                    dropdown.classList.remove('show');
                });
            }
            
            return videoElement;
        }
        
        // Réinitialiser le suivi vidéo
        function resetVideoTracking() {
            if (videoWatchTimer) {
                clearTimeout(videoWatchTimer);
                videoWatchTimer = null;
            }
            hasCountedView = false;
            currentVideoWatchStart = 0;
        }
        
        // Démarrer le suivi du visionnage
        function startVideoTracking(videoId) {
            resetVideoTracking();
            
            // Commencer à compter après 30 secondes
            videoWatchTimer = setTimeout(() => {
                // Compter une vue après 30 secondes
                app.trackView(videoId, 'current-user');
                hasCountedView = true;
                
                // Mettre à jour l'affichage
                const video = app.getVideoById(videoId);
                if (video) {
                    videoViews.textContent = `${video.views} vues • ${video.date}`;
                }
                
                // Continuer à vérifier toutes les 30 secondes
                videoWatchTimer = setInterval(() => {
                    if (mainVideo && !mainVideo.paused) {
                        app.trackView(videoId, 'current-user');
                        
                        // Mettre à jour l'affichage
                        const video = app.getVideoById(videoId);
                        if (video) {
                            videoViews.textContent = `${video.views} vues • ${video.date}`;
                        }
                    }
                }, 30000); // 30 secondes
            }, 30000);
            
            currentVideoWatchStart = Date.now();
        }
        
        // Jouer une vidéo
        function playVideo(videoId) {
            const video = app.getVideoById(videoId);
            if (!video) return;
            
            // Arrêter la vidéo en cours
            if (currentPlayingVideo) {
                currentPlayingVideo.pause();
                resetVideoTracking();
            }
            
            // Ajouter à l'historique
            app.addToHistory(videoId);
            
            // Charger la vidéo
            videoSource.src = video.videoUrl;
            mainVideo.load();
            mainVideo.poster = video.thumbnail;
            
            // Mettre à jour les informations
            videoTitle.textContent = video.title;
            videoViews.textContent = `${video.views} vues • ${video.date}`;
            likeCount.textContent = video.likes;
            commentsCount.textContent = `${video.comments} commentaire${video.comments !== 1 ? 's' : ''}`;
            
            // Mettre à jour les informations de la chaîne
            document.getElementById('channel-avatar').innerHTML = `<img src="${video.channelAvatar}" alt="${video.channel}" class="channel-avatar-img">`;
            document.getElementById('channel-name').textContent = video.channel;
            document.getElementById('subscriber-count').textContent = `${video.subscribers} abonnés`;
            
            // Mettre à jour le bouton d'abonnement
            const isSubscribed = app.isSubscribed(video.channelId);
            subscribeBtn.textContent = isSubscribed ? "Abonné" : "S'abonner";
            subscribeBtn.classList.toggle('subscribed', isSubscribed);
            subscribeBtn.dataset.channelId = video.channelId;
            
            // Mettre à jour le bouton de sauvegarde
            const isSaved = app.savedVideos.includes(video.id);
            saveBtn.querySelector('span').textContent = isSaved ? "Sauvegardé" : "Sauvegarder";
            
            // Charger les commentaires
            loadComments(videoId);
            
            // Charger les vidéos recommandées
            loadRecommendedVideos(videoId);
            
            // Afficher la section du lecteur
            app.currentVideoId = videoId;
            showSection('player');
            
            // Démarrer le suivi du visionnage
            startVideoTracking(videoId);
            
            // Stocker la référence à la vidéo en cours
            currentPlayingVideo = mainVideo;
            
            // Écouter la fin de la vidéo
            mainVideo.onended = () => {
                resetVideoTracking();
            };
            
            // Écouter la pause de la vidéo
            mainVideo.onpause = () => {
                if (videoWatchTimer) {
                    clearTimeout(videoWatchTimer);
                    videoWatchTimer = null;
                }
            };
            
            // Écouter la reprise de la vidéo
            mainVideo.onplay = () => {
                if (!videoWatchTimer && !hasCountedView) {
                    startVideoTracking(videoId);
                }
            };
        }
        
        // Charger les commentaires avec actions de suppression
        function loadComments(videoId) {
            commentList.innerHTML = '';
            const comments = app.getCommentsForVideo(videoId);
            
            if (comments.length === 0) {
                commentList.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #aaa;">
                        <p>Soyez le premier à commenter cette vidéo !</p>
                    </div>
                `;
                return;
            }
            
            comments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment-item';
                commentElement.dataset.commentId = comment.id;
                
                const actions = comment.canDelete ? `
                    <div class="comment-actions">
                        <button class="comment-action-btn delete-comment-btn" data-comment-id="${comment.id}">
                            <i class="fas fa-trash"></i> Supprimer
                        </button>
                    </div>
                ` : '';
                
                commentElement.innerHTML = `
                    <div class="user-comment-avatar">
                        <img src="${comment.authorAvatar}" alt="${comment.author}" class="user-comment-avatar-img">
                    </div>
                    <div class="comment-text">
                        <div class="comment-author">${comment.author} <span style="color: #aaa; font-weight: normal; font-size: 12px;">${comment.time}</span></div>
                        <div class="comment-content">${comment.content}</div>
                        ${actions}
                    </div>
                `;
                
                commentList.appendChild(commentElement);
            });
            
            document.querySelectorAll('.delete-comment-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const commentId = btn.dataset.commentId;
                    deleteComment(commentId);
                });
            });
        }
        
        // Charger les vidéos recommandées
        function loadRecommendedVideos(currentVideoId) {
            recommendedVideosContainer.innerHTML = '';
            
            const recommendedVideos = app.videos.filter(v => v.id != currentVideoId);
            
            if (recommendedVideos.length === 0) {
                recommendedVideosContainer.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #aaa;">
                        <p>Aucune autre vidéo disponible</p>
                    </div>
                `;
                return;
            }
            
            recommendedVideos.slice(0, 5).forEach(video => {
                const videoElement = document.createElement('div');
                videoElement.className = 'recommended-video';
                videoElement.dataset.id = video.id;
                videoElement.innerHTML = `
                    <div class="recommended-thumbnail">
                        <img src="${video.thumbnail}" alt="${video.title}">
                    </div>
                    <div class="recommended-info">
                        <div class="recommended-video-title">${video.title}</div>
                        <div class="recommended-channel">${video.channel}</div>
                        <div class="recommended-stats">${video.views} vues</div>
                    </div>
                `;
                
                videoElement.addEventListener('click', () => {
                    playVideo(video.id);
                });
                
                recommendedVideosContainer.appendChild(videoElement);
            });
        }
        
        // Gérer les actions sur les vidéos
        function handleVideoAction(videoId, action) {
            switch (action) {
                case 'edit':
                    editVideo(videoId);
                    break;
                case 'edit-thumbnail':
                    editThumbnail(videoId);
                    break;
                case 'delete':
                    deleteVideo(videoId);
                    break;
                case 'report':
                    reportVideo(videoId);
                    break;
            }
        }
        
        // Modifier une vidéo
        function editVideo(videoId) {
            const video = app.getVideoById(videoId);
            if (!video) return;
            
            if (!app.isVideoOwner(videoId)) {
                alert("Vous ne pouvez modifier que vos propres vidéos.");
                return;
            }
            
            videoToEdit = videoId;
            videoTitleInput.value = video.title;
            videoDescriptionInput.value = video.description;
            videoCategoryInput.value = video.category;
            
            openUploadModal();
        }
        
        // Modifier la miniature
        function editThumbnail(videoId) {
            const video = app.getVideoById(videoId);
            if (!video) return;
            
            if (!app.isVideoOwner(videoId)) {
                alert("Vous ne pouvez modifier que vos propres vidéos.");
                return;
            }
            
            videoToEdit = videoId;
            openThumbnailModal();
        }
        
        // Supprimer une vidéo
        function deleteVideo(videoId) {
            const video = app.getVideoById(videoId);
            if (!video) return;
            
            const isUserVideo = app.isVideoOwner(videoId);
            const message = isUserVideo 
                ? "Voulez-vous vraiment supprimer cette vidéo ? Cette action est irréversible."
                : `Vous ne pouvez supprimer que vos propres vidéos.`;
            
            if (isUserVideo && confirm(message)) {
                const success = app.deleteVideo(videoId);
                
                if (success) {
                    if (app.currentSection === 'home') {
                        loadHomeVideos();
                    }
                    if (app.currentSection === 'shorts') {
                        loadShorts();
                    }
                    if (app.libraryTab === 'my-videos') {
                        loadLibraryContent();
                    }
                    if (app.currentSection === 'profile') {
                        loadProfile();
                    }
                    
                    if (app.currentVideoId === videoId) {
                        showSection('home');
                    }
                    
                    updateProfileDropdown();
                    
                    alert("Vidéo supprimée avec succès !");
                }
            } else if (!isUserVideo) {
                alert(message);
            }
        }
        
        // Signaler une vidéo
        function reportVideo(videoId) {
            videoToReport = videoId;
            openReportModal();
        }
        
        // Supprimer un commentaire
        function deleteComment(commentId) {
            if (confirm("Voulez-vous vraiment supprimer ce commentaire ?")) {
                const success = app.deleteComment(commentId);
                
                if (success) {
                    loadComments(app.currentVideoId);
                    
                    const video = app.getVideoById(app.currentVideoId);
                    if (video) {
                        commentsCount.textContent = `${video.comments} commentaire${video.comments !== 1 ? 's' : ''}`;
                    }
                    
                    alert("Commentaire supprimé avec succès !");
                }
            }
        }
        
        // Ouvrir le modal d'upload
        function openUploadModal() {
            uploadModal.style.display = 'flex';
            customThumbnailFile = null;
        }
        
        // Fermer le modal d'upload
        function closeUploadModal() {
            uploadModal.style.display = 'none';
            uploadForm.reset();
            fileNameDisplay.textContent = '';
            videoToEdit = null;
            customThumbnailFile = null;
        }
        
        // Ouvrir le modal de profil
        function openProfileModal() {
            const profile = app.userProfile;
            profileNameInput.value = profile.username;
            
            loadAvatarOptions();
            
            profileModal.style.display = 'flex';
        }
        
        // Fermer le modal de profil
        function closeProfileModal() {
            profileModal.style.display = 'none';
            profileForm.reset();
            selectedAvatarOption = null;
            customAvatarFile = null;
        }
        
        // Ouvrir le modal de signalement
        function openReportModal() {
            document.querySelectorAll('input[name="report-reason"]').forEach(radio => {
                radio.checked = false;
            });
            reportDetails.value = '';
            
            reportModal.style.display = 'flex';
        }
        
        // Fermer le modal de signalement
        function closeReportModal() {
            reportModal.style.display = 'none';
            videoToReport = null;
        }
        
        // Charger les options d'avatar
        function loadAvatarOptions() {
            avatarOptions.innerHTML = '';
            
            const defaultAvatars = [
                { id: 'avatar1', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alex&backgroundColor=3ea6ff' },
                { id: 'avatar2', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Jordan&backgroundColor=ff6b6b' },
                { id: 'avatar3', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Taylor&backgroundColor=51cf66' },
                { id: 'avatar4', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Casey&backgroundColor=fcc419' },
                { id: 'avatar5', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Riley&backgroundColor=cc5de8' },
                { id: 'avatar6', url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Skyler&backgroundColor=339af0' }
            ];
            
            defaultAvatars.forEach(avatar => {
                const option = document.createElement('div');
                option.className = 'avatar-option';
                if (avatar.url === app.userProfile.avatar) {
                    option.classList.add('selected');
                    selectedAvatarOption = avatar;
                }
                option.dataset.avatar = avatar.id;
                option.innerHTML = `<img src="${avatar.url}" alt="Avatar">`;
                
                option.addEventListener('click', () => {
                    document.querySelectorAll('.avatar-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                    selectedAvatarOption = avatar;
                    customAvatarFile = null;
                });
                
                avatarOptions.appendChild(option);
            });
            
            const uploadOption = document.createElement('div');
            uploadOption.className = 'avatar-option avatar-upload';
            uploadOption.innerHTML = `<i class="fas fa-plus"></i>`;
            uploadOption.title = "Uploader un avatar personnalisé";
            
            uploadOption.addEventListener('click', () => {
                customAvatarInput.click();
            });
            
            avatarOptions.appendChild(uploadOption);
        }
        
        // Ouvrir le modal de miniature
        function openThumbnailModal() {
            const selector = document.getElementById('thumbnail-selector');
            selector.innerHTML = '';
            
            const defaultThumbnails = [
                { id: 'default1', url: 'https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Nature' },
                { id: 'default2', url: 'https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Technologie' },
                { id: 'default3', url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Montagne' },
                { id: 'default4', url: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Gaming' },
                { id: 'default5', url: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Musique' },
                { id: 'default6', url: 'https://images.unsplash.com/photo-1563379926898-05f4575a45d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', label: 'Cuisine' }
            ];
            
            defaultThumbnails.forEach(thumb => {
                const option = document.createElement('div');
                option.className = 'thumbnail-option';
                option.dataset.thumbnail = thumb.id;
                option.innerHTML = `<img src="${thumb.url}" alt="${thumb.label}">`;
                
                option.addEventListener('click', () => {
                    document.querySelectorAll('.thumbnail-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                    selectedThumbnailOption = thumb;
                });
                
                selector.appendChild(option);
            });
            
            thumbnailModal.style.display = 'flex';
        }
        
        // Fermer le modal de miniature
        function closeThumbnailModal() {
            thumbnailModal.style.display = 'none';
            videoToEdit = null;
            selectedThumbnailOption = null;
            document.getElementById('new-thumbnail').value = '';
        }
        
        // Détecter le format d'une vidéo
        function detectVideoFormat(file) {
            return new Promise((resolve) => {
                const video = document.createElement('video');
                video.preload = 'metadata';
                
                video.onloadedmetadata = function() {
                    const width = video.videoWidth;
                    const height = video.videoHeight;
                    const ratio = width / height;
                    
                    let aspectRatio;
                    
                    if (Math.abs(ratio - 9/16) < 0.1) aspectRatio = "9:16";
                    else if (Math.abs(ratio - 1) < 0.1) aspectRatio = "1:1";
                    else if (Math.abs(ratio - 4/5) < 0.1) aspectRatio = "4:5";
                    else if (Math.abs(ratio - 4/3) < 0.1) aspectRatio = "4:3";
                    else if (Math.abs(ratio - 2/3) < 0.1) aspectRatio = "2:3";
                    else if (Math.abs(ratio - 16/9) < 0.1) aspectRatio = "16:9";
                    else aspectRatio = "other";
                    
                    const duration = Math.round(video.duration);
                    const minutes = Math.floor(duration / 60);
                    const seconds = duration % 60;
                    const durationStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    resolve({
                        aspectRatio: aspectRatio,
                        duration: durationStr,
                        width: width,
                        height: height
                    });
                    
                    URL.revokeObjectURL(video.src);
                };
                
                video.onerror = function() {
                    resolve({
                        aspectRatio: "16:9",
                        duration: "5:30",
                        width: 1920,
                        height: 1080
                    });
                };
                
                video.src = URL.createObjectURL(file);
            });
        }
        
        // Lire un fichier comme URL de données
        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }
        
        // Afficher les résultats de recherche pour les vidéos
        function showSearchVideosResults(query) {
            searchVideosResults.innerHTML = '';
            
            const results = app.searchVideos(query);
            
            if (results.length === 0) {
                searchVideosResults.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-search" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucun résultat trouvé</h3>
                        <p>Aucune vidéo ne correspond à votre recherche</p>
                    </div>
                `;
                return;
            }
            
            const videosContainer = document.createElement('div');
            videosContainer.className = 'videos-grid';
            
            results.forEach(video => {
                const videoElement = createVideoCard(video);
                videosContainer.appendChild(videoElement);
            });
            
            searchVideosResults.appendChild(videosContainer);
        }
        
        // Afficher les résultats de recherche pour les chaînes
        function showSearchChannelsResults(query) {
            searchChannelsResults.innerHTML = '';
            
            const results = app.searchChannels(query);
            
            if (results.length === 0) {
                searchChannelsResults.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #aaa;">
                        <i class="fas fa-search" style="font-size: 64px; margin-bottom: 16px; color: #3f3f3f;"></i>
                        <h3>Aucun résultat trouvé</h3>
                        <p>Aucune chaîne ne correspond à votre recherche</p>
                    </div>
                `;
                return;
            }
            
            const channelsContainer = document.createElement('div');
            channelsContainer.className = 'subscriptions-grid';
            
            results.forEach(channel => {
                const channelElement = document.createElement('div');
                channelElement.className = 'subscription-channel-card';
                channelElement.dataset.channelId = channel.id;
                channelElement.innerHTML = `
                    <div class="subscription-channel-avatar">
                        <img src="${channel.avatar}" alt="${channel.username}" class="subscription-channel-avatar-img">
                    </div>
                    <div class="subscription-channel-name">${channel.username}</div>
                    <div class="subscription-channel-stats">${channel.subscribers} abonnés • ${channel.videos} vidéos</div>
                    <p style="font-size: 12px; color: #aaa; margin-top: 8px;">${channel.description}</p>
                `;
                
                channelElement.addEventListener('click', () => {
                    searchInput.value = channel.username;
                    performSearch();
                });
                
                channelsContainer.appendChild(channelElement);
            });
            
            searchChannelsResults.appendChild(channelsContainer);
        }
        
        // Configurer les écouteurs d'événements
        function setupEventListeners() {
            // Navigation dans la sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', () => {
                    const section = item.dataset.section;
                    
                    if (section === 'subscriptions') {
                        loadSubscriptions();
                    }
                    
                    showSection(section);
                    
                    if (section === 'history') {
                        loadHistory();
                    } else if (section === 'library') {
                        loadLibraryContent();
                    }
                });
            });
            
            // Onglets du profil
            profileTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    profileTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    app.profileTab = tab.dataset.profileTab;
                    loadProfileVideos();
                });
            });
            
            // Onglets de recherche
            searchTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    searchTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    app.searchTab = tab.dataset.searchTab;
                    
                    if (app.searchTab === 'videos') {
                        searchVideosResults.style.display = 'block';
                        searchChannelsResults.style.display = 'none';
                        showSearchVideosResults(currentSearchQuery);
                    } else {
                        searchVideosResults.style.display = 'none';
                        searchChannelsResults.style.display = 'block';
                        showSearchChannelsResults(currentSearchQuery);
                    }
                });
            });
            
            // Filtres de catégorie
            categoryFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    categoryFilters.forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');
                    
                    const category = filter.dataset.category;
                    loadHomeVideos(category);
                });
            });
            
            // Navigation dans la bibliothèque
            document.querySelectorAll('.library-action-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.library-action-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    btn.classList.add('active');
                    
                    app.libraryTab = btn.dataset.libraryTab;
                    loadLibraryContent();
                });
            });
            
            // Recherche
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            // Commentaires
            commentSubmitBtn.addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                const content = commentInput.value.trim();
                if (content) {
                    app.addComment(app.currentVideoId, content);
                    loadComments(app.currentVideoId);
                    
                    const video = app.getVideoById(app.currentVideoId);
                    if (video) {
                        commentsCount.textContent = `${video.comments} commentaire${video.comments !== 1 ? 's' : ''}`;
                    }
                    
                    commentInput.value = '';
                }
            });
            
            // Likes
            document.getElementById('like-btn').addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                const liked = app.toggleLike(app.currentVideoId);
                const video = app.getVideoById(app.currentVideoId);
                if (video) {
                    likeCount.textContent = video.likes;
                }
            });
            
            // Dislikes
            dislikeBtn.addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                app.addDislike(app.currentVideoId);
                alert("Merci pour votre retour !");
            });
            
            // Partager
            shareBtn.addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                const video = app.getVideoById(app.currentVideoId);
                if (video) {
                    const shareUrl = window.location.href.split('#')[0] + '#video=' + app.currentVideoId;
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        alert("Lien de la vidéo copié dans le presse-papier !");
                    });
                }
            });
            
            // Sauvegarder
            saveBtn.addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                const saved = app.toggleSave(app.currentVideoId);
                saveBtn.querySelector('span').textContent = saved ? "Sauvegardé" : "Sauvegarder";
                alert(saved ? "Vidéo sauvegardée !" : "Vidéo retirée des sauvegardes");
            });
            
            // S'abonner
            subscribeBtn.addEventListener('click', () => {
                if (!app.currentVideoId) return;
                
                const channelId = subscribeBtn.dataset.channelId;
                if (channelId) {
                    const subscribed = app.toggleSubscription(channelId);
                    subscribeBtn.textContent = subscribed ? "Abonné" : "S'abonner";
                    subscribeBtn.classList.toggle('subscribed', subscribed);
                    
                    const video = app.getVideoById(app.currentVideoId);
                    if (video) {
                        const channel = app.getChannelById(channelId);
                        if (channel) {
                            video.subscribers = channel.subscribers.toString();
                            document.getElementById('subscriber-count').textContent = `${video.subscribers} abonnés`;
                        }
                    }
                    
                    if (app.currentSection === 'subscriptions') {
                        loadSubscriptions();
                    }
                }
            });
            
            // Menu utilisateur
            userAvatar.addEventListener('click', (e) => {
                e.stopPropagation();
                profileDropdown.classList.toggle('show');
            });
            
            // Voir le profil
            viewProfileBtn.addEventListener('click', () => {
                profileDropdown.classList.remove('show');
                loadProfile();
                showSection('profile');
            });
            
            // Modifier le profil (depuis le dropdown)
            editProfileBtn.addEventListener('click', () => {
                profileDropdown.classList.remove('show');
                openProfileModal();
            });
            
            // Modifier le profil (depuis la page profil)
            editProfileFromPage.addEventListener('click', () => {
                openProfileModal();
            });
            
            // Déconnexion
            document.getElementById('logout-btn').addEventListener('click', () => {
                profileDropdown.classList.remove('show');
                alert("Déconnexion effectuée !");
            });
            
            // Fermer les dropdowns en cliquant ailleurs
            document.addEventListener('click', () => {
                profileDropdown.classList.remove('show');
            });
            
            // Upload modal
            openUploadModalBtn.addEventListener('click', openUploadModal);
            closeUploadModalBtn.addEventListener('click', closeUploadModal);
            cancelUploadBtn.addEventListener('click', closeUploadModal);
            
            // Gestion de l'upload de fichier vidéo
            fileUploadArea.addEventListener('click', () => {
                videoFileInput.click();
            });
            
            videoFileInput.addEventListener('change', async () => {
                if (videoFileInput.files.length > 0) {
                    const file = videoFileInput.files[0];
                    fileNameDisplay.textContent = `Fichier sélectionné : ${file.name}`;
                    
                    const videoInfo = await detectVideoFormat(file);
                    const isShort = app.isShortFormat(videoInfo.aspectRatio);
                    
                    if (isShort) {
                        fileNameDisplay.textContent += ` (SHORT - ${videoInfo.aspectRatio})`;
                    } else {
                        fileNameDisplay.textContent += ` (VIDÉO - ${videoInfo.aspectRatio})`;
                    }
                }
            });
            
            // Upload de miniature lors de l'import
            videoThumbnailUpload.addEventListener('change', async () => {
                if (videoThumbnailUpload.files.length > 0) {
                    customThumbnailFile = videoThumbnailUpload.files[0];
                    fileNameDisplay.textContent += ` + Miniature personnalisée`;
                }
            });
            
            // Upload d'avatar personnalisé
            customAvatarInput.addEventListener('change', async () => {
                if (customAvatarInput.files.length > 0) {
                    customAvatarFile = customAvatarInput.files[0];
                    selectedAvatarOption = null;
                    
                    document.querySelectorAll('.avatar-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                }
            });
            
            // Glisser-déposer de fichier
            fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUploadArea.style.borderColor = '#3ea6ff';
            });
            
            fileUploadArea.addEventListener('dragleave', () => {
                fileUploadArea.style.borderColor = '#3f3f3f';
            });
            
            fileUploadArea.addEventListener('drop', async (e) => {
                e.preventDefault();
                fileUploadArea.style.borderColor = '#3f3f3f';
                
                if (e.dataTransfer.files.length > 0) {
                    videoFileInput.files = e.dataTransfer.files;
                    const file = e.dataTransfer.files[0];
                    fileNameDisplay.textContent = `Fichier sélectionné : ${file.name}`;
                    
                    const videoInfo = await detectVideoFormat(file);
                    const isShort = app.isShortFormat(videoInfo.aspectRatio);
                    
                    if (isShort) {
                        fileNameDisplay.textContent += ` (SHORT - ${videoInfo.aspectRatio})`;
                    } else {
                        fileNameDisplay.textContent += ` (VIDÉO - ${videoInfo.aspectRatio})`;
                    }
                }
            });
            
            // Formulaire d'upload
            uploadForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const title = videoTitleInput.value;
                const description = videoDescriptionInput.value;
                const category = videoCategoryInput.value;
                const videoFile = videoFileInput.files[0];
                
                if (!videoFile && !videoToEdit) {
                    alert("Veuillez sélectionner une vidéo à importer");
                    return;
                }
                
                let thumbnailUrl = null;
                
                if (customThumbnailFile) {
                    thumbnailUrl = await readFileAsDataURL(customThumbnailFile);
                }
                
                if (!videoToEdit) {
                    let videoInfo = {
                        aspectRatio: "16:9",
                        duration: "5:30"
                    };
                    
                    if (videoFile) {
                        videoInfo = await detectVideoFormat(videoFile);
                    }
                    
                    const videoUrl = videoFile ? URL.createObjectURL(videoFile) : "#";
                    
                    const newVideo = app.addVideo({
                        title: title,
                        description: description,
                        videoUrl: videoUrl,
                        thumbnail: thumbnailUrl,
                        aspectRatio: videoInfo.aspectRatio,
                        duration: videoInfo.duration,
                        category: category
                    });
                    
                    if (newVideo.isShort) {
                        loadShorts();
                    } else {
                        loadHomeVideos();
                    }
                    
                    updateProfileDropdown();
                    
                    playVideo(newVideo.id);
                } else {
                    if (!app.isVideoOwner(videoToEdit)) {
                        alert("Vous ne pouvez modifier que vos propres vidéos.");
                        closeUploadModal();
                        return;
                    }
                    
                    const updates = {
                        title: title,
                        description: description,
                        category: category
                    };
                    
                    if (thumbnailUrl) {
                        updates.thumbnail = thumbnailUrl;
                    }
                    
                    app.updateVideoInShared(videoToEdit, updates);
                    
                    loadHomeVideos();
                    loadLibraryContent();
                    
                    if (app.currentVideoId === videoToEdit) {
                        const video = app.getVideoById(videoToEdit);
                        videoTitle.textContent = video.title;
                        if (thumbnailUrl) {
                            mainVideo.poster = video.thumbnail;
                        }
                    }
                }
                
                closeUploadModal();
            });
            
            // Formulaire de profil
            profileForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const username = profileNameInput.value.trim();
                let avatarUrl = app.userProfile.avatar;
                
                if (customAvatarFile) {
                    avatarUrl = await readFileAsDataURL(customAvatarFile);
                } else if (selectedAvatarOption) {
                    avatarUrl = selectedAvatarOption.url;
                }
                
                if (!username) {
                    alert("Veuillez entrer un nom d'utilisateur");
                    return;
                }
                
                app.updateProfile({
                    username: username,
                    avatar: avatarUrl
                });
                
                updateUserAvatar();
                updateProfileDropdown();
                
                if (app.currentSection === 'home') {
                    loadHomeVideos();
               
